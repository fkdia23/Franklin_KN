---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import Socials from "@/components/Socials.astro";
import LinkButton from "@/components/LinkButton.astro";
import Card from "@/components/Card.astro";
import Hr from "@/components/Hr.astro";
import getSortedPosts from "@/utils/getSortedPosts";
import IconArrowRight from "@/assets/icons/IconArrowRight.svg";
import { SITE } from "@/config";
import { SOCIALS } from "@/constants";

const posts = await getCollection("blog");

const sortedPosts = getSortedPosts(posts);
const featuredPosts = sortedPosts.filter(({ data }) => data.featured);
const recentPosts = sortedPosts.filter(({ data }) => !data.featured);
---

<Layout>
  <Header />

  <main id="main-content" data-layout="index">
    <!-- HERO -->
  <section id="hero" class="pt-2 pb-2 mt-12 mb-12">

      <div class="flex flex-col sm:flex-row sm:items-start gap-6 mb-6">
    {/* Photo √† gauche */}
    <div class="flex-shrink-0">
      <img
        src="/public/profile.jpeg" 
        alt="Franklin Kana Ngu√©dia"
        class="w-32 h-32 sm:w-40 sm:h-40 rounded-full object-cover border border-muted/30"
      />
    </div>

    {/* Contenu texte √† droite */}
    <div>
      <h1 class="my-4 text-xl font-bold sm:my-4 sm:text-3xl text-foreground">
        Franklin KANA NGUEDIA
      </h1>

      <div class="mb-6">
        <p class="text-xl font-semibold text-muted-foreground">
          Data ¬∑ IA ‚Äî Engineer
        </p>
        <p class="text-lg font-medium opacity-80">
          Portfolio technique & Laboratoire d'exp√©rimentation
        </p>
      </div>
    </div>
  </div>

    <div class="mt-4 max-w-2xl">
      <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span>üõ†</span> Ce que je b√¢tis
      </h2>
      <p class="mb-4 text-muted-foreground">
        Je con√ßois des syst√®mes <strong>Data & IA de bout en bout</strong> avec une obsession pour la robustesse et la scalabilit√© :
      </p>
      <ul class="grid gap-4 sm:grid-cols-1 ml-1">
        <li class="flex flex-start gap-3">
          <span class="text-accent mt-1">‚ñπ</span>
          <span><strong>Data Engineering :</strong> Pipelines complexes et architectures distribu√©es (Spark, Kafka, Flink).</span>
        </li>
        <li class="flex flex-start gap-3">
          <span class="text-accent mt-1">‚ñπ</span>
          <span><strong>Intelligence Artificielle :</strong> LLMs, applications intelligentes et Machine Learning.</span>
        </li>
        <li class="flex flex-start gap-3">
          <span class="text-accent mt-1">‚ñπ</span>
          <span><strong>Structure & Graphes :</strong> Mod√©lisation de donn√©es complexes via la th√©orie des graphes (Neo4j).</span>
        </li>
      </ul>
    </div>

    <div class="mt-6 max-w-3xl bg-muted/20 p-6 rounded-lg border border-muted/50">
      <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
        <span>üß™</span> L'approche Lab
      </h2>
      <p class="leading-relaxed">
        Chaque projet est une <strong>it√©ration</strong>. Je publie mes choix d'architecture, mes 
        <span class="italic">√©checs techniques</span> et mes apprentissages pour transformer 
        l'exp√©rimentation en <strong>impact m√©tier concret</strong>.
      </p>
    </div>
      <!-- <div class="mt-6 flex flex-wrap gap-4">
        <LinkButton href="/projects/">
          Explorer les Projets 
          <IconArrowRight class="inline-block rtl:-rotate-180" />
        </LinkButton>

        <LinkButton
          class="underline decoration-dashed underline-offset-4 hover:text-accent"
          href="/ask-my-ai/"
        >
          Interagir avec mon IA
        </LinkButton>
      </div> -->

      {
        SOCIALS.length > 0 && (
          <div class="mt-6 flex flex-col sm:flex-row sm:items-center">
            <div class="me-2 mb-1 whitespace-nowrap sm:mb-0">
              Me retrouver :
            </div>
            <Socials />
          </div>
        )
      }
    </section>

    <Hr />

    <!-- STACK -->
    <!-- <section id="stack" class="pt-12 pb-6">
      <h2 class="text-2xl font-semibold tracking-wide">
        Stack & outils
      </h2>

      <p class="mt-3 max-w-2xl">
        Technologies que j‚Äôutilise ou que j‚Äôexplore activement √† travers
        des Projets , des articles et des exp√©rimentations.
      </p>

      <ul class="mt-6 grid gap-4 sm:grid-cols-2">
        <li>
          <strong>Data & Machine Learning</strong><br />
          Python, Pandas, NumPy, Scikit-learn, SQL, feature engineering,
          √©valuation et interpr√©tation de mod√®les
        </li>

        <li>
          <strong>IA & LLMs</strong><br />
          RAG, embeddings, vector databases, prompt engineering,
          chatbots et agents IA
        </li>

        <li>
          <strong>Data Engineering & Apache ecosystem</strong><br />
          Kafka, Spark, Airflow, Flink, pipelines distribu√©s,
          traitement batch & streaming
        </li>

        <li>
          <strong>Graphes & donn√©es complexes</strong><br />
          Th√©orie des graphes, Neo4j, mod√©lisation relationnelle avanc√©e,
          exploration de r√©seaux
        </li>

        <li>
          <strong>Cloud & MLOps</strong><br />
          Azure, Docker, APIs REST, bases CI/CD,
          d√©ploiement et industrialisation de mod√®les
        </li>

        <li>
          <strong>Frontend & interactions</strong><br />
          Next.js, React, Tailwind CSS, data visualisation,
          interfaces interactives et p√©dagogiques
        </li>
      </ul>
    </section> -->

    <Hr />

    <!-- DOMAINS -->
    <!-- <section id="domains" class="pt-12 pb-6">
      <h2 class="text-2xl font-semibold tracking-wide">
        Domaines d‚Äôapplication
      </h2>

      <p class="mt-3 max-w-2xl">
        Je souhaite appliquer ces technologies √† des secteurs o√π la data et
        l‚ÄôIA peuvent avoir un <strong>impact concret et mesurable</strong>.
      </p>

      <ul class="mt-4 list-disc ps-6">
        <li>
          <strong>Sant√©</strong> ‚Äî aide √† la d√©cision, analyse de donn√©es
          complexes, syst√®mes fiables et explicables
        </li>
        <li>
          <strong>√ânergie</strong> ‚Äî optimisation, pr√©vision,
          syst√®mes distribu√©s et data temps r√©el
        </li>
      </ul>
    </section> -->

    <Hr />

    <!-- CERTIFICATIONS -->
    <!-- <section id="certifications" class="pt-12 pb-6">
      <h2 class="text-2xl font-semibold tracking-wide">
        Certifications & apprentissage
      </h2>

      <ul class="mt-4 list-disc ps-6">
        <li>Microsoft Azure ‚Äî Fundamentals / Data</li>
        <li>Machine Learning & Data Science ‚Äî Projets  acad√©miques et pratiques</li>
        <li>Cloud, DevOps & MLOps ‚Äî Docker, architectures modernes</li>
      </ul>
    </section> -->

    <Hr />

    <!-- FEATURED POSTS -->
    {
      featuredPosts.length > 0 && (
        <>
          <section id="featured" class="pt-12 pb-6">
            <h2 class="text-2xl font-semibold tracking-wide">
              Projets mis en avant
            </h2>
            <ul>
              {featuredPosts.map(data => (
                <Card variant="h3" {...data} />
              ))}
            </ul>
          </section>

          {recentPosts.length > 0 && <Hr />}
        </>
      )
    }

    <!-- RECENT POSTS -->
    {
      recentPosts.length > 0 && (
        <section id="recent-posts" class="pt-12 pb-6">
          <h2 class="text-2xl font-semibold tracking-wide">
            Projets r√©cents
          </h2>
          <ul>
            {recentPosts.map(
              (data, index) =>
                index < SITE.postPerIndex && (
                  <Card variant="h3" {...data} />
                )
            )}
          </ul>
        </section>
      )
    }

    <div class="my-8 text-center">
      <LinkButton href="/posts/">
        Tous mes projets
        <IconArrowRight class="inline-block rtl:-rotate-180" />
      </LinkButton>
    </div>
  </main>

  <!-- <Footer /> -->
</Layout>


<script>
  document.addEventListener("astro:page-load", () => {
    const indexLayout = (document.querySelector("#main-content") as HTMLElement)
      ?.dataset?.layout;
    if (indexLayout) {
      sessionStorage.setItem("backUrl", "/");
    }
  });
</script>
